{% extends "base.html" %}
{% block title %}Inv{% endblock %}
{% block content %}
<head>
    <link rel="stylesheet" href="../static/buttons.css">
    <link rel="stylesheet" href="../static/tables.css">
    <script src="../static/scripts/updateFormInventory.js" async></script>
    <script src="../static/scripts/deleteAlert.js" async></script>
</head>

<!-- pop-up for Delete burron -->
<div class="InvisibleDel">
  <h1>Are you sure you want to delete this item?</h1>
  <a id="yesDelete" class="deleteButton">Yes</a>
  <a id="noDelete" class="cancelButton">No</a>
</div>

<!-- form displayed if user clicks Update -->
<div class="Invisible">
  <form id="updateForm" action="" method="POST">
    <table id="tableUpdate">
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Branch</th>
        <th>Quantity</th>
        <th>Cost</th>
        <th>Price</th>
        <th>Expiricy</th>
        <th>Reserved</th>
        <th>Barcode</th>
        <th>Update</th>
      </tr>
      <tr>
        <td id="idUpdate" value="">
        </td>
        <td>
          <label for="nameUpdate"></label>
          <input 
          type="text"
          id="nameUpdate"
          name="nameUpdate"
          placeholder=""
          value=""
          />
        </td>
        <td>
          <label for="branchesUpdate">select s.</label>
          <select name="branchesUpdate" id="branchesUpdate">
          </select>
        </td>
        <td>
          <label for="quantityUpdate"></label>
          <input 
            type="number"
            id="quantityUpdate"
            name="quantityUpdate"
            placeholder=""
            value=""
          />
        </td>
        <td>
          <label for="costUpdate"></label>
          <input 
            type="number"
            id="costUpdate"
            name="costUpdate"
            placeholder=""
            value=""
          />
        </td>
        <td>
          <label for="priceUpdate"></label>
          <input 
            type="number"
            id="priceUpdate"
            name="priceUpdate"
            placeholder=""
            value=""
          />
        </td>
        <td>
          <label for="expiryUpdate"></label>
          <input 
            type="date"
            id="expiryUpdate"
            name="expiryUpdate"
            placeholder=""
            value=""
          />
        </td>
        <td>
          <label for="qty_reserved"></label>
          <input 
            type="number"
            id="qty_reservedUpdate"
            name="qty_reservedUpdate"
            placeholder=""
          />
        </td>
        <td>
          <label for="qr_barcodeUpdate"></label>
          <input 
            type="number"
            id="qr_barcodeUpdate"
            name="qr_barcodeUpdate"
            placeholder="888 888 888 888"
            value=""
          />
        </td>
        <td>
          <input id="updateButton" name="btn-add" value="Update" type="submit"/>
        </td>
      </tr>
    </table>
    <a class="cancelButton" id="cancelButtonUpdate">Cancel</a>
  </form>
</div>



<style>
    html {margin-left: 30px;}
</style>
<style>
    table, td, th {
      border: 1px solid black;
      text-align: center;
      padding: 5px;
    }
    th {background-color: orange;}
    table {margin-bottom: 15px;}
  input {width: 100px;}
  td {    white-space: nowrap;}/*ajusta las td al content*/
 
  </style>
<br>
    <h1>Inventory</h1>
    <br> 
    <p>Your products will be shown here</p>
    <p>First four fields are mandatory if you want to add a product</p>

    <!-- form for searching with filters -->
    <form method="POST">
      <input type="text" name="search" id="search" placeholder="Search..">
      <select id="orderby" name="orderby">
        <option disabled="" value="" selected="">Order By:</option>
        <option value="higherprice">Higher Price</option>
        <option value="lowerprice">Lower Price</option>
        <option value="highercost">Higher Cost</option>
        <option value="lowercost">Lower Cost</option>
      </select>
      <input name="btn-srch" value="Search" type="submit"/>
    </form>

    <!-- form for adding a product -->
    <form method="POST">  
        <table>
            <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Branch</th>
              <th>Quantity</th>
              <th>Cost</th>
              <th>Price</th>
              <th>Expiricy</th>
              <th>Reserved</th>
              <th>Barcode</th>
              <th>Add/Update</th>
              <th>Delete</th>
            </tr>
            <tr>
                <!-- row for adding a  product -->
                <td>
                  {{ nextid }}
                </td>
                <td>
                  <label for="name"></label>
                  <input 
                   type="text"
                   id="name"
                   name="name"
                   placeholder=""
                  />
                </td>
                <td>
                  <label for="branch">select s.</label>
                  <select name="branch" id="branch">
                    {% for s in branches%}
                    <option value="{{s.name}}">{{s.name}}</option>
                    {% endfor %}
                  </select>
                </td>
                <td>
                  <label for="quantity"></label>
                  <input 
                  type="number"
                  id="quantity"
                  name="quantity"
                  placeholder=""
                />
                </td>
                <td>
                  <label for="cost"></label>
                  <input 
                  type="number"
                  id="cost"
                  name="cost"
                  placeholder=""
                  />
                </td>
                <td>
                  <label for="price"></label>
                  <input 
                  type="number"
                  id="price"
                  name="price"
                  placeholder=""
                  />
                </td>
                <td>
                  <label for="expiry"></label>
                  <input 
                  type="date"
                  id="expiry"
                  name="expiry"
                  placeholder=""
                  />
                </td>
                <td>
                  <label for="qty_reserved"></label>
                  <input 
                  type="number"
                  id="qty_reserved"
                  name="qty_reserved"
                  placeholder=""
                  />
                </td>
                <td>
                  <label for="qr_barcode"></label>
                  <input 
                  type="number"
                  id="qr_barcode"
                  name="qr_barcode"
                  placeholder="888 888 888 888"
                  />
                </td>
                <td>
                  <input id="btn-add" name="btn-add" value="add product" type="submit"/>
                </td>
                <th></th>
            </tr>
    <!-- start listing the products -->  
    {% for p in products.items %}    
    <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.branch }}</td>
        <td>{{ p.quantity }}</td>
        <td>{{ p.cost }}</td>
        <td>{{ p.price }}</td>
        <td>{{ p.expiry }}</td>
        <td>{{ p.qty_reserved }}</td>
        <td>{{ p.qr_barcode }}</td>
        <td><a id="{{ p.id }}" class="updateButton">
            Update
            </a>
        </td>
        <td>
            <a id="{{ p.id }}.inventory" class="deleteButton">
            <!--<a class="deleteButton" href=" url_for( 'inventory.Delete', id=p.id) '">-->
            Delete
            </a>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- pagination of table rows -->
{% for page_num in products.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=3) %}
    {% if page_num %}
        {% if products.page == page_num %}
            <a  class="btn btn-info mb-4" href="{{url_for('inventory.inv', page=page_num)}}">{{page_num}}</a>
        {% else %}
            <a  class="btn btn-outline-info mb-4" href="{{url_for('inventory.inv', page=page_num)}}">{{page_num}}</a>
        {% endif %}      
    {% else %}
        ...
    {% endif %}
{% endfor %}
<br>
{% endblock %}